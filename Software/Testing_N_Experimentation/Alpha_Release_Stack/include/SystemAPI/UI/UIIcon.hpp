/*****************************************************************
 * @file UIIcon.hpp
 * @brief UI Framework Icon - Icon and symbol display
 * 
 * Icons for common UI symbols using simple bitmap or glyph icons.
 * 
 * @author ARCOS
 * @version 1.0
 *****************************************************************/

#pragma once

#include "UIElement.hpp"

namespace SystemAPI {
namespace UI {

/**
 * @brief Built-in icon types
 */
enum class IconType : uint8_t {
  NONE = 0,
  
  // Navigation
  ARROW_UP,
  ARROW_DOWN,
  ARROW_LEFT,
  ARROW_RIGHT,
  CHEVRON_UP,
  CHEVRON_DOWN,
  CHEVRON_LEFT,
  CHEVRON_RIGHT,
  
  // Actions
  CHECK,
  CLOSE,
  PLUS,
  MINUS,
  MENU,
  MORE,
  REFRESH,
  SEARCH,
  
  // Status
  INFO,
  WARNING,
  ERROR,
  SUCCESS,
  QUESTION,
  
  // Media
  PLAY,
  PAUSE,
  STOP,
  RECORD,
  NEXT,
  PREV,
  VOLUME_UP,
  VOLUME_DOWN,
  VOLUME_MUTE,
  
  // System
  SETTINGS,
  POWER,
  BATTERY_FULL,
  BATTERY_HALF,
  BATTERY_LOW,
  BATTERY_EMPTY,
  WIFI,
  WIFI_OFF,
  BLUETOOTH,
  GPS,
  
  // Misc
  HEART,
  STAR,
  HOME,
  FOLDER,
  FILE,
  LOCK,
  UNLOCK,
  
  COUNT
};

/**
 * @brief Get icon bitmap data
 * Simple 8x8 bitmap icons
 */
inline const uint8_t* getIconBitmap(IconType icon) {
  // 8x8 bitmaps - each byte is a row
  static const uint8_t icons[][8] = {
    // NONE
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
    // ARROW_UP
    {0x18, 0x3C, 0x7E, 0x18, 0x18, 0x18, 0x18, 0x00},
    // ARROW_DOWN
    {0x18, 0x18, 0x18, 0x18, 0x7E, 0x3C, 0x18, 0x00},
    // ARROW_LEFT
    {0x10, 0x30, 0x7F, 0xFF, 0x7F, 0x30, 0x10, 0x00},
    // ARROW_RIGHT
    {0x08, 0x0C, 0xFE, 0xFF, 0xFE, 0x0C, 0x08, 0x00},
    // CHEVRON_UP
    {0x00, 0x18, 0x3C, 0x66, 0x42, 0x00, 0x00, 0x00},
    // CHEVRON_DOWN
    {0x00, 0x00, 0x42, 0x66, 0x3C, 0x18, 0x00, 0x00},
    // CHEVRON_LEFT
    {0x00, 0x20, 0x30, 0x18, 0x18, 0x30, 0x20, 0x00},
    // CHEVRON_RIGHT
    {0x00, 0x04, 0x0C, 0x18, 0x18, 0x0C, 0x04, 0x00},
    // CHECK
    {0x00, 0x01, 0x03, 0x06, 0x6C, 0x38, 0x10, 0x00},
    // CLOSE
    {0x00, 0x42, 0x24, 0x18, 0x18, 0x24, 0x42, 0x00},
    // PLUS
    {0x00, 0x18, 0x18, 0x7E, 0x7E, 0x18, 0x18, 0x00},
    // MINUS
    {0x00, 0x00, 0x00, 0x7E, 0x7E, 0x00, 0x00, 0x00},
    // MENU
    {0x00, 0x7E, 0x00, 0x7E, 0x00, 0x7E, 0x00, 0x00},
    // MORE
    {0x00, 0x24, 0x24, 0x00, 0x00, 0x00, 0x00, 0x00},
    // REFRESH
    {0x3C, 0x42, 0x81, 0x80, 0x81, 0x42, 0x3C, 0x08},
    // SEARCH
    {0x1C, 0x22, 0x22, 0x22, 0x1C, 0x18, 0x30, 0x00},
    // INFO
    {0x18, 0x18, 0x00, 0x18, 0x18, 0x18, 0x18, 0x00},
    // WARNING
    {0x18, 0x18, 0x3C, 0x3C, 0x3C, 0x18, 0x18, 0x00},
    // ERROR
    {0x42, 0x66, 0x3C, 0x18, 0x3C, 0x66, 0x42, 0x00},
    // SUCCESS
    {0x00, 0x01, 0x03, 0x06, 0x6C, 0x38, 0x10, 0x00},
    // QUESTION
    {0x3C, 0x66, 0x06, 0x0C, 0x18, 0x00, 0x18, 0x00},
    // PLAY
    {0x20, 0x30, 0x38, 0x3C, 0x38, 0x30, 0x20, 0x00},
    // PAUSE
    {0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x00},
    // STOP
    {0x7E, 0x7E, 0x7E, 0x7E, 0x7E, 0x7E, 0x7E, 0x00},
    // RECORD
    {0x3C, 0x7E, 0x7E, 0x7E, 0x7E, 0x7E, 0x3C, 0x00},
    // NEXT
    {0x20, 0x38, 0x3C, 0x3E, 0x3C, 0x38, 0x20, 0x06},
    // PREV
    {0x60, 0x1C, 0x3C, 0x7C, 0x3C, 0x1C, 0x04, 0x00},
    // VOLUME_UP
    {0x04, 0x0C, 0x7C, 0x7C, 0x7C, 0x0C, 0x04, 0x00},
    // VOLUME_DOWN
    {0x00, 0x0C, 0x7C, 0x7C, 0x7C, 0x0C, 0x00, 0x00},
    // VOLUME_MUTE
    {0x04, 0x0C, 0x7C, 0x42, 0x24, 0x18, 0x24, 0x00},
    // SETTINGS
    {0x18, 0x7E, 0x5A, 0x7E, 0x7E, 0x5A, 0x7E, 0x18},
    // POWER
    {0x18, 0x18, 0x3C, 0x42, 0x42, 0x42, 0x3C, 0x00},
    // BATTERY_FULL
    {0x7E, 0x7F, 0x7F, 0x7F, 0x7F, 0x7F, 0x7E, 0x00},
    // BATTERY_HALF
    {0x7E, 0x41, 0x7D, 0x7D, 0x7D, 0x41, 0x7E, 0x00},
    // BATTERY_LOW
    {0x7E, 0x41, 0x41, 0x79, 0x79, 0x41, 0x7E, 0x00},
    // BATTERY_EMPTY
    {0x7E, 0x41, 0x41, 0x41, 0x41, 0x41, 0x7E, 0x00},
    // WIFI
    {0x18, 0x24, 0x42, 0x18, 0x24, 0x00, 0x18, 0x00},
    // WIFI_OFF
    {0x18, 0x24, 0x43, 0x1A, 0x24, 0x08, 0x18, 0x10},
    // BLUETOOTH
    {0x18, 0x14, 0x52, 0x34, 0x34, 0x52, 0x14, 0x18},
    // GPS
    {0x18, 0x3C, 0x66, 0x42, 0x42, 0x24, 0x18, 0x00},
    // HEART
    {0x66, 0xFF, 0xFF, 0xFF, 0x7E, 0x3C, 0x18, 0x00},
    // STAR
    {0x18, 0x18, 0xFF, 0x7E, 0x3C, 0x66, 0x42, 0x00},
    // HOME
    {0x18, 0x3C, 0x7E, 0xFF, 0x66, 0x66, 0x66, 0x00},
    // FOLDER
    {0x78, 0x40, 0x7F, 0x7F, 0x7F, 0x7F, 0x7F, 0x00},
    // FILE
    {0x3E, 0x22, 0x3E, 0x20, 0x20, 0x20, 0x3E, 0x00},
    // LOCK
    {0x18, 0x24, 0x24, 0x7E, 0x7E, 0x7E, 0x7E, 0x00},
    // UNLOCK
    {0x18, 0x04, 0x04, 0x7E, 0x7E, 0x7E, 0x7E, 0x00},
  };
  
  if ((int)icon < (int)IconType::COUNT) {
    return icons[(int)icon];
  }
  return icons[0];
}

/**
 * @brief Icon display element
 * 
 * @example
 * ```cpp
 * auto icon = new UIIcon(IconType::SETTINGS);
 * icon->setColor(Colors::Primary);
 * icon->setSize(16);  // 16x16
 * 
 * // In a button
 * auto btn = new UIButton();
 * btn->setIcon(IconType::PLAY);
 * ```
 */
class UIIcon : public UIElement {
public:
  UIIcon() {
    style_.width(8).height(8);
  }
  
  UIIcon(IconType type) : icon_(type) {
    style_.width(8).height(8);
  }
  
  const char* getTypeName() const override { return "UIIcon"; }
  
  // ---- Icon ----
  
  void setIcon(IconType type) { icon_ = type; markDirty(); }
  IconType getIcon() const { return icon_; }
  
  // ---- Color ----
  
  void setColor(const Color& color) { 
    style_.textColor(color); 
    markDirty(); 
  }
  
  // ---- Scale ----
  
  void setScale(uint8_t scale) { 
    scale_ = scale;
    style_.width(8 * scale).height(8 * scale);
    markDirty(); 
  }
  
  uint8_t getScale() const { return scale_; }
  
  // ---- Layout ----
  
  Size getPreferredSize() const override {
    return Size(8 * scale_, 8 * scale_);
  }
  
  // ---- Rendering ----
  
  void render(UIRenderer& renderer) override;  // Implemented in UIRenderer.hpp
  
protected:
  IconType icon_ = IconType::NONE;
  uint8_t scale_ = 1;
};

} // namespace UI
} // namespace SystemAPI
